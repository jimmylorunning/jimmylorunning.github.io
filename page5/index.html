<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" class="theme-base-09">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      jlc &middot; jimmylocoding
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          jlc
        </a>
      </h1>
      <p class="lead">jimmylocoding</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archives/">Archives</a>
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
      <a class="sidebar-nav-item" href="/resume">My Resume</a>
      <div class="social-media">
        <a class="sidebar-nav-item" href="https://github.com/jimmylorunning"><i class="fa fa-github fa-2x"></i></a>
        <a class="sidebar-nav-item" href="http://twitter.com/jimmylocoding"><i class="fa fa-twitter fa-2x"></i></a>
      </div>
    </nav>

  </div>
</div>


    <div class="content container">
      <div class="posts">
  
    
    <div class="post">
      <h1 class="post-title">
        <a href="/2015/01/09/self-or-no-self/">
          self or no self
        </a>
      </h1>

      <span class="post-date">09 Jan 2015</span>

      <p>Ruby is sometimes very confusing. For example, when you call an instance method within the same class, you can do so with or without <code>self</code>... it&#39;s optional:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">instance_method</span> <span class="c1"># works from inside the class</span>
<span class="nb">self</span><span class="o">.</span><span class="n">instance_method</span> <span class="c1"># also works from inside the class</span>
<span class="n">other_object</span><span class="o">.</span><span class="n">instance_method</span> <span class="c1"># works from outside the class</span></code></pre></div>

<p>However, if the method is a setter method, <a href="http://www.rubyfleebie.com/use-self-explicitly/">you <em>must</em> use self</a>. The reasoning behind this is that Ruby doesn&#39;t know whether <code>instance_method</code> is an instance method or a local variable, and the <code>self</code> gets rid of that ambiguity. Let&#39;s call this rule A.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">instance_method</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># error</span>
<span class="nb">self</span><span class="o">.</span><span class="n">instance_method</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># works</span></code></pre></div>

<p>However, <a href="http://stackoverflow.com/questions/4293215/understanding-private-methods-in-ruby">private methods can&#39;t use self</a>. Let&#39;s call this rule B. The reasoning behind this is that private methods cannot be called with an explicit receiver, even if <code>self</code> is that receiver.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">self</span><span class="o">.</span><span class="n">private_method</span> <span class="c1"># error</span>
<span class="n">private_method</span> <span class="c1"># works</span></code></pre></div>

<p>What happens when rule A butts head with rule B?</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">private_method</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># violates rule A - error</span>
<span class="nb">self</span><span class="o">.</span><span class="n">private_method</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># violates rule B - but works!</span></code></pre></div>

<p>Apparently in this case, the second line is the one that&#39;s allowed. <a href="http://devblog.orgsync.com/2013/05/20/private-and-protected-they-might-not-mean-what-you-think-they-mean/">This blog post</a> explains it very clearly:
<blockquote>When using a setter in Ruby we&#39;re supposed to use an explicit receiver like <code>self</code>. Here we have a private method that doesn&#39;t allow an explicit receiver. We appear to have reached an impasse. <strong>In this case it turns out Ruby breaks its own rule.</strong></blockquote>
Before I found this, I was trying to get around the impasse by doing jenky things like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">private_method</span><span class="o">=</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span></code></pre></div>

<p>I was surprised this wasn&#39;t a bigger topic, but then <a href="http://heartmindcode.com/2013/04/25/private_accessors_in_ruby/">I read this article</a> about how private and protected methods aren&#39;t even used that much in Ruby!
<blockquote>For the most part, we just... don’t [write private methods].</blockquote>
The following is from the book I&#39;m reading, <a href="http://www.poodr.com/">Practical Object Oriented Design in Ruby</a> by Sandi Metz:
<blockquote>Users of a class can redefine any method to public regardless of its initial declaration. The private and protected keywords are more like flexible barriers than concrete restrictions. ... Using them sends two messages:
<ul>
    <li>You believe that you have better information today than programmers will have in the future</li>
    <li>You believe that those future programmers need to be prevented from accidentally using a method that you currently consider unstable</li>
</ul>
These beliefs may be correct but the future is a long way off and one can never be certain... many perfectly  competent Ruby programmers omit them and instead use comments or a special method naming convention (Ruby on Rails, for example, adds a leading &#39;_&#39; to private methods) to indicate public and private parts of interfaces.</blockquote>
I don&#39;t know what I feel about all this yet, but I might skip over writing private methods for now just because it makes things much easier for me immediately.</p>


      
      <span class="post-comments-link"><a href="/2015/01/09/self-or-no-self/#comments"><i class="fa fa-comments"></i> Drop some knowledge!</a></span>
      
    </div>
    
  
    
    <div class="post">
      <h1 class="post-title">
        <a href="/2015/01/07/hiding-my-api-keys/">
          Hiding my API keys
        </a>
      </h1>

      <span class="post-date">07 Jan 2015</span>

      <h3>Problem:</h3>

<p>I don&#39;t want to expose API secret keys, but I still want to be able to commit my changes and push to github.</p>

<h3>Solution:</h3>

<ul>
    <li>Install <a href="https://github.com/laserlemon/figaro">figaro</a> gem</li>
    <li>set environment variables in config/application.yml

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">my_api_key</span><span class="p">:</span> <span class="s1">&#39;weoi23urow234jerow67jerjerjwejr&#39;</span></code></pre></div>

</li>
  <li>make sure .gitignore ignores config/application.yml</li>
  <li>in the initializer code, (for my week3 app, I put this in config/initializer/twitter.rb) use ENV['my_api_key'] instead of hardcoding the api key</li>
  <li>after deploying to heroku, run this command to set heroku's env variables
</li>
</ul>

<blockquote>
<p>figaro heroku:set -e production</p>
</blockquote>


      
      <span class="post-comments-link"><a href="/2015/01/07/hiding-my-api-keys/#comments"><i class="fa fa-comments"></i> Drop some knowledge!</a></span>
      
    </div>
    
  
    
    <div class="post">
      <h1 class="post-title">
        <a href="/2015/01/05/week-2-round-up-say-anything/">
          Week 2 Round Up: say-anything
        </a>
      </h1>

      <span class="post-date">05 Jan 2015</span>

      <p>Week 2 of An App Per Week is over! It was tough and I got a little behind. I planned to implement the <a href="http://docs.railsbridge.org/intermediate-rails/">RailsBridge intermediate curriculum</a>, plus testing and some extra features. Here is what I was able to accomplish:
<ul>
    <li>all the basic features specified in the curriculum</li>
    <li>extra features:
<ul>
    <li>deleting posts</li>
    <li>profile page with a list of posts (not replies yet)</li>
    <li>custom user fields: username and favorite movie fields instead of just the default e-mail and password</li>
    <li>some testing</li>
    <li>fancy bootstrap styling</li>
</ul>
</li>
</ul>
What I wasn&#39;t able to finish this time around:
<ul>
    <li>Testing! I got some testing done, but it was taking too long to do for features that I wasn&#39;t sure how to build out, so I figured I&#39;d write the tests after the fact. So that&#39;s still on my to do list...</li>
    <li><a href="https://github.com/intridea/omniauth">Omniauth</a> -- being able to log in through Twitter, Github, FB, etc. I might do this tomorrow</li>
    <li>fancier post markup, or maybe even a wysiwyg edit window would be nice (I&#39;m sure there&#39;s a gem, right?)</li>
</ul>
<a href="https://aqueous-sierra-5780.herokuapp.com/">And here it is!</a> All in all, I am pretty happy with it. The major things I learned:
<ul>
    <li><a href="https://github.com/plataformatec/devise">Devise</a> was a pleasure to work with. It&#39;s relatively easy to set up and gave me a lot of standard user stuff out of the box. I really liked it. It wasn&#39;t even that hard to add custom fields (username, favorite movie, etc.) to the user profile. At one point I had to look into the Devise source on github to figure something out, but even that wasn&#39;t too hard because it&#39;s pretty well organized.</li>
    <li><a href="http://guides.rubyonrails.org/routing.html#nested-resources">Nested resources</a>. I implemented replies the non-nested way, then re-read the hints section, and figured out that nested resources was the way to go with this kind of feature. Nested resources gives you an url that corresponds to the relationship of your models. So because replies belong to posts, you can have a URL like post/5/replies. It doesn&#39;t matter as much in my finished product since I ended up embedding replies within posts anyway.</li>
    <li>Dealing with <a href="http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters">strong parameters</a></li>
    <li><a href="http://guides.rubyonrails.org/association_basics.html">has_many / belongs_to</a> association -- I&#39;ve dealt with this before, but this was my first time working with them outside of a tutorial, so it sunk in more</li>
    <li>The <a href="http://guides.rubyonrails.org/asset_pipeline.html">asset pipeline</a> -- had to figure some assets out and so I read a little bit about this, but I need to read way more when I have time</li>
</ul></p>

<h3>Unsolved problems:</h3>

<p>When testing, I had to run some tests as a signed in user and some as signed out. How do I do this? After some reading, I figured out that I had to stub the authentication in the specs. I followed <a href="https://github.com/plataformatec/devise/wiki/How-To:-Stub-authentication-in-controller-specs">these directions</a> and put the ControllerHelpers module in spec/support/controller_helpers.rb as well as the accompanying config. But it kept complaining: &quot;undefined method sign_in&quot;.</p>

<p>After a certain amount of googling, head scratching, and generally going nowhere, I finally just moved the module into my spec file. Not graceful, but I had to keep going. If you have any ideas about this let me know.</p>

<p>Also while trying to test user authentication related things, I figured out how to fake sign in/out inside of rails console and get to the user object:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ApplicationController</span><span class="o">.</span><span class="n">allow_forgery_protection</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/users/sign_in&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="o">=&gt;</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;jimmy&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;mypassword&quot;</span><span class="p">}})</span>
<span class="n">cu</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">current_user</span></code></pre></div>

<p>I find it super useful to be able to try things out in the console. It&#39;s probably where I learn the most.</p>

<p>Another problem. In Michael Hartl&#39;s Rails Tutorial book, he was able to set up a <code>has_many</code> / <code>belongs_to</code> association between User and Micropost. And because this was set up, he was automatically able to write something like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">User</span><span class="o">.</span><span class="n">micropost</span><span class="o">.</span><span class="n">some_method</span><span class="p">()</span></code></pre></div>

<p>However, I set up my app in a very similar way. My <code>:post belongs_to :user</code> and my <code>:user has_many :posts</code>. But I couldn&#39;t get this to work. I always got &quot;undefined method posts&quot;. My workaround was simply to use plain old Posts object and pass it the <code>current_user</code> when needed.</p>

<p>Another thing I learned... where and <code>find_by_???</code> methods are not interchangeable:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">x</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># returns ActiveRecord::Relation</span>
<span class="n">y</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># returns User</span>
<span class="n">x</span><span class="o">.</span><span class="n">id</span> <span class="c1"># error, no id method</span>
<span class="n">y</span><span class="o">.</span><span class="n">id</span> <span class="c1"># returns the user id correctly</span>
<span class="n">x</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="n">block</span> <span class="p">}</span> <span class="c1"># works</span>
<span class="n">y</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="n">block</span> <span class="p">}</span> <span class="c1"># error, no each method on User</span></code></pre></div>

<p>There are many other smaller things I could blog about, but I don&#39;t have time and you probably don&#39;t have patience. I may write up a few of these smaller issues later if I feel like it.</p>

<h3>Next Week</h3>

<p>Any ideas? I&#39;m thinking about writing an app that would involve pulling from some API... maybe the Twitter API and doing something with the data. Stay tuned.</p>


      
      <span class="post-comments-link"><a href="/2015/01/05/week-2-round-up-say-anything/#comments"><i class="fa fa-comments"></i> Drop some knowledge!</a></span>
      
    </div>
    
  
    
    <div class="post">
      <h1 class="post-title">
        <a href="/2015/01/02/how-do-i-write-tests-that-dont-have-to-keep-changing/">
          How do I write tests that I don’t have to keep changing?
        </a>
      </h1>

      <span class="post-date">02 Jan 2015</span>

      <p>Sometimes I want to check to make sure my controller is sending a message to my model. For example, I want to make sure it&#39;s asking the model to return a set of results. But I don&#39;t care what message it sends:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Posts</span><span class="o">.</span><span class="n">should_receive</span><span class="p">(</span><span class="ss">:all</span><span class="p">)</span>
  <span class="n">get</span> <span class="ss">:index</span></code></pre></div>

<p>Here I&#39;m making sure I&#39;m asking the model for all posts. However, I soon realized that I wanted them ordered a certain way. So I replaced the controller code to call :order instead of :all</p>

<p>Now I have to go back to the test and change it. But later perhaps I will want to change it again to use <code>:find</code> or <code>:find_all_by</code> or <code>:where</code> or something else altogether.</p>

<p>Will I have to change the test every time? What I really want is a way to say “make sure my controller sends my model a message, it doesn&#39;t matter what message it sends.” Because basically all these methods perform a similar task, and I don&#39;t care which implementation I ultimately decide on. My tests should just care about the fact that I sent the message at all, and that the model will take care of the rest. So my question is two-fold:
<ol>
    <li>Should I even be testing for this? Or is this not an important thing to test?</li>
    <li>If I should be testing for this, how do I do it so I don&#39;t have to change my test code every time?Is this possible?</li>
</ol></p>


      
      <span class="post-comments-link"><a href="/2015/01/02/how-do-i-write-tests-that-dont-have-to-keep-changing/#comments"><i class="fa fa-comments"></i> Drop some knowledge!</a></span>
      
    </div>
    
  
    
    <div class="post">
      <h1 class="post-title">
        <a href="/2015/01/01/blogging-in-the-new-year/">
          Blogging in the New Year
        </a>
      </h1>

      <span class="post-date">01 Jan 2015</span>

      <p>Happy new year and welcome to jimmylocoding! This will be a space for me to document my journey learning Ruby on Rails (and inevitably many other things along the way and beyond). Hopefully it will be somewhat interesting/educational for others.</p>

<p>My Rails journey started around January 2014, but life took over before I could get through Michael Hartl&#39;s Rails Tutorial. About two months ago, I decided to pick up where I left off--here are some of the things I&#39;ve done since:
<ul>
  <li>Started going to <a href="http://www.meetup.com/atlantaruby/">Ruby meetups</a></li>
  <li>Started going to <a href="http://www.meetup.com/codeforatlanta/">codeforatlanta</a> (civic hacking) meeups/hackathons</li>
  <li>Did a bunch of katas on <a href="http://codewars.com/">codewars.com</a> -- I highly recommend this, it made me start to &quot;think Ruby&quot;</li>
  <li>Took this <a href="https://www.edx.org/course/engineering-software-service-uc-berkeleyx-cs169-1x">EdX.org class on SaaS</a> -- this was super helpful, and I will blog about this more in the future</li>
  <li>Got really comfortable with git/github, at least the very basic common commands</li>
  <li>Listened to a bunch of podcasts. My favorites are <a href="http://devchat.tv/ruby-rogues/">Ruby Rogues</a> and <a href="http://www.codenewbie.org/">Code Newbie</a>. Code Newbie also has an online community of friendly encouraging folks.</li>
  <li>Recently resolved to write a new app every week, even if it&#39;s a very simple app</li>
</ul>
This is my second week writing an app per week. Last week, I finally made my very first app outside of following tutorials. It was a bit scary at first to not have that reassuring set of instructions to fall back on.</p>

<p>For my first app, I chose a very simple, some may even say <em>boring</em>, app: a to do list! People kept telling me &quot;Just write an app for practice,&quot; and I had planned to do this. But I couldn&#39;t think of any good ideas!</p>

<p>Or my ideas were <em>too</em> good and <em>too</em> ambitious, and therefore too intimidating for a first project. Then I realized it doesn&#39;t have to be a good idea! I decided that since my first few apps will suck anyway, I should just keep it simple and focus on getting them out as quickly as possible and try to learn as much as I can from them.</p>

<p>If you&#39;re curious, you can see the <a href="https://github.com/jimmylorunning/muchtodo">source code</a> of my first app on github or play with it <a href="https://intense-beyond-1562.herokuapp.com/todos">on Heroku</a>. I learned a lot. And even though it could be a lot better, I need to move on to Week Two!</p>

<p>This week, I am working on a message board app, based on the <a href="http://docs.railsbridge.org/intermediate-rails/">RailsBridge curriculum</a>. The curriculum is perfect because it gives me a guide to follow in terms of what to do next without giving me any of the technical hand-holding that tutorials give. So it&#39;s still challenging, but with a bit of structure thrown in.</p>

<p>You can see it <a href="https://github.com/jimmylorunning/say-something">on github here</a> and play with it (even in its half finished state) <a href="https://aqueous-sierra-5780.herokuapp.com/">on Heroku</a>. I will be continually deploying it as I finish each part, and blogging about it too. So stay tuned!</p>


      
      <span class="post-comments-link"><a href="/2015/01/01/blogging-in-the-new-year/#comments"><i class="fa fa-comments"></i> Drop some knowledge!</a></span>
      
    </div>
    
  
</div>

<div class="pagination">
  
    <span class="pagination-item older">Older</span>
  
  
    
      <a class="pagination-item newer" href="/page4">Newer</a>
    
  
</div>


      
    </div>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4265933-6', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
